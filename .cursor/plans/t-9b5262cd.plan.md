<!-- 9b5262cd-5869-4dbb-9b0a-2c4fcfab1327 c78afab6-a392-4128-b417-7246651e1b71 -->
# 优化会话/分组记忆提示词以降噪

## 范围

- 仅更新 `prompts.js` 中 `SESSION_SUMMARY` 与 `GROUP_SUMMARY` 两段模板文本（不改逻辑）。
- 同步更新 `README.md` / `README_zh.md` 关于“记忆生成规则”说明。
- 更新 `CURSOR.md` 主体对记忆规则的描述，并在末尾追加变更记录。

## 变更要点（按你选择 1.a / 2.a）

- 低信号会话不跳过存储：各段按要求输出“无”。
- 保留“模型要点”但最多 1 条，且仅当对后续有明确指导价值，否则写“无”。
- 硬性“严禁包含”：问候/自述/能力列表/模型元信息等全部剔除。
- 合并去重：语义相近合并；一次性/无长期价值内容丢弃。

## 将替换的模板（核心片段）

- 会话记忆（节选，完整内容将写入 `prompts.js`）：
- 必须保留：仅用户事实/偏好/配置/地点时间/明确请求/可复用上下文。
- 严禁包含：问候寒暄、自我介绍、能力列表、模型元信息、模板话术。
- 低信号：若无新增用户事实或请求 → 各段写“无”。
- 输出格式：
- 用户意图：一句话；无则“无”
- 关键信息：0–5 条，仅“用户提供/明确请求”；无则“无”
- 模型要点：最多 1 条；无则“无”
- 待办/跟进：0–3 条；无则“无”
- 限制：总字数 ≤200，每条 ≤40 字。

- 分组记忆（节选，完整内容将写入 `prompts.js`）：
- 保留：跨会话重复/长期可复用事实、偏好、常用口径、固定风格/格式、阈值与约束、高频需求。
- 严禁包含：模型元信息、能力自述、问候、一次性产物标题、泛化建议。
- 合并：相似点合并成更一般化表述；仅出现一次且无长期价值 → 丢弃。
- 输出格式：分组记忆 5–7 条（≤40 字/条，按重要性排序）；待跟进 0–3 条（无则“无”）。

## 文档同步

- README（中/英）：新增“记忆生成规则”小节，概述保留/禁止/低信号/长度限制与输出格式。
- CURSOR.md：在“核心数据流/记忆规则”处写入新规则，并在“变更记录”追加本次修改摘要。

## 验证

- 用纯问候对话重新生成会话记忆：应得到四段均为“无”。
- 用含明确请求（如“写朦胧诗，风格顾城，80 字”）的对话：应仅保留该请求与必要参数；不含模型元信息。

### To-dos

- [ ] 替换 prompts.js 的 SESSION_SUMMARY 与 GROUP_SUMMARY 文本
- [ ] 更新 README.md / README_zh.md 的记忆规则说明（中英同步）
- [ ] 更新 CURSOR.md 主体与追加变更记录
- [ ] 用低信号与高信号示例各验证一次输出是否达标