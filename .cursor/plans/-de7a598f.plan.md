<!-- de7a598f-853f-4883-b279-2094319823cf 912a2d67-e136-40a2-a91e-5d255f2822e4 -->
# 统一“会话摘要”为“会话记忆”，排查并统一“分组记忆”表述，附存储兼容迁移

## 目标

- 将所有用户可见文本与文档中的“会话摘要”统一替换为“会话记忆”。
- 全面排查并统一“分组记忆”表述：中文统一为“分组记忆”，英文统一为“group memory”。
- 明确术语：会话记忆 + 分组记忆 = 项目记忆系统（记忆注入遵循该两部分）。
- 保留现有代码标识符/字段名不改名（如 `savedDeepseekConversations[].summary`、`conversationGroups[].memorySummary`、日志事件 `groupmem_*` 等）。
- 增加一次性本地存储兼容迁移（仅读取回填）：若存在历史字段（如 `memory`、`groupMemory`），则回填到现用字段（`summary`、`memorySummary`）。

## 受影响文件

- `index.html`：UI 文案、注释中“会话摘要/分组记忆”表述，注入说明与状态提示。
- `conversations.html`：按钮与标签（查看/隐藏/重新生成）、分组记忆查看区文本、注释。
- `prompts.js`：提示词中文文案，确保描述使用“会话记忆/分组记忆”。
- `README.md` / `README_zh.md`：功能、用法、注入说明统一术语；英文使用“session memory / group memory”。
- `CURSOR.md`：主体与变更记录，明确“记忆系统=会话记忆+分组记忆”。

## 关键改动（要点）

- UI 文案：
  - `查看会话摘要/隐藏会话摘要/重新生成会话摘要` → `查看会话记忆/隐藏会话记忆/重新生成会话记忆`。
  - 任何“分组摘要/组记忆/群组记忆”等非标准用法统一为“分组记忆”。
- 注释与文案：
  - 将注释中的“会话摘要段/自动摘要”等改为“会话记忆段/自动会话记忆”。
  - 将“分组摘要/记忆摘要”等描述统一为“分组记忆”。
- 提示词：
  - `GROUP_SUMMARY` 文案中“会话摘要合成为分组记忆”保持，但全局统一术语为“会话记忆/分组记忆”。
- 一次性存储兼容迁移（示例伪代码，实际在两页面初始化时执行）：
```javascript
(function migrateStorageCompat(){
  try {
    let saved = JSON.parse(localStorage.getItem('savedDeepseekConversations')||'[]');
    let changed = false;
    for (const c of saved) {
      if (c && c.memory && !c.summary) { c.summary = c.memory; changed = true; }
    }
    if (changed) localStorage.setItem('savedDeepseekConversations', JSON.stringify(saved));

    let groups = JSON.parse(localStorage.getItem('conversationGroups')||'[]');
    let gChanged = false;
    for (const g of groups) {
      if (g && g.groupMemory && !g.memorySummary) { g.memorySummary = g.groupMemory; gChanged = true; }
    }
    if (gChanged) localStorage.setItem('conversationGroups', JSON.stringify(groups));
  } catch(_) { /* 迁移失败不影响主流程 */ }
})();
```


## 不做的改动

- 不更改字段/键名（`summary`、`memorySummary`、日志事件类型等），避免破坏兼容。

## 验收要点

- 所有中文 UI/文档不再出现“会话摘要/分组摘要”等旧称呼，统一为“会话记忆/分组记忆”。
- 英文 `README.md` 统一使用“session memory / group memory”。
- 历史数据若含 `memory/groupMemory` 字段，可在不丢失的前提下显示与注入。
- `CURSOR.md` 主体与变更记录同步反映“记忆系统=会话记忆+分组记忆”。

### To-dos

- [ ] 替换 index.html 与 conversations.html 所有用户可见“会话摘要”为“会话记忆”
- [ ] 调整 prompts.js 中中文提示词文本使用“会话记忆”表述
- [ ] 在 index.html 与 conversations.html 注入本地存储兼容迁移函数（回填 memory→summary、groupMemory→memorySummary）
- [ ] 更新 README.md/README_zh.md 术语与说明，同步中英文
- [ ] 更新 CURSOR.md 主体与追加变更记录，明确记忆系统与术语统一